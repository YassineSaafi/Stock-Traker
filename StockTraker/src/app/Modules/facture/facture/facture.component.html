<div class="container">
<form [formGroup]="factureForm" (ngSubmit)="genererFacture()">
  <div class="mb-3">
    <label for="clientSelect" class="form-label">Choisir un client</label>
    <select formControlName="nomclient" id="clientSelect" class="form-select" required>
      <option *ngFor="let client of clients" [value]="client.nom">{{ client.nom }}</option>
    </select>
  </div>

  <div class="mb-3">
    <label for="produitSelect" class="form-label">Choisir un produit</label>
    <select formControlName="produitSelect" id="produitSelect" class="form-select">
      <option *ngFor="let produit of produits" [value]="produit._id">{{ produit.nom }}</option>
    </select>
  </div>

  <div class="mb-3">
    <label for="quantite" class="form-label">Quantité</label>
    <input type="number" formControlName="quantite" id="quantite" class="form-control" required>
  </div>

  <button type="button" class="btn btn-primary mb-3" (click)="ajouterProduit()">Ajouter Produit</button>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Référence</th>
        <th>Nom</th>
        <th>Quantité</th>
        <th>Prix Unitaire</th>
        <th>Prix Total</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of items">
        <td>{{ item.ref }}</td>
        <td>{{ item.nom }}</td>
        <td>{{ item.qte }}</td>
        <td>{{ item.prix | currency:'EUR':'symbol':'1.2-2' }}</td>
        <td>{{ item.prix * item.qte | currency:'EUR':'symbol':'1.2-2' }}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="4">Total</td>
        <td>{{ calculerTotal() | currency:'EUR':'symbol':'1.2-2' }}</td>
      </tr>
    </tfoot>
  </table>

  <div class="form-group">
    <label for="paiement">Méthode de paiement :</label>
    <select id="paiement" formControlName="paiement" class="form-control" required>
      <option value="espèces">Espèces</option>
      <option value="chèque">Chèque</option>
      <option value="virement">Virement</option>
    </select>
  </div>

  <div class="form-group">
    <label for="validation">Validation :</label>
    <input type="checkbox" id="validation" formControlName="validation">
  </div>

  <button type="submit" class="btn btn-success">Générer Facture</button>
</form>
</div>
